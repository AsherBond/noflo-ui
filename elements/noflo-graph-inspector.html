<polymer-element name="noflo-graph-inspector" attributes="graph">
  <style>
    noflo-graph-inspector {
      top: calc(50% - 220px) !important;
    }
    noflo-graph-inspector textarea {
      height: 210px;
    }
  </style>
  <template>
    <h1 on-blur="{{ updateName }}" contenteditable>{{ graph.properties.name }}</h1>
    <template if="{{ graph.properties.environment.runtime == 'html' }}">
    <label>
      <span>Preview address</span>
      <input type="text" value="{{ graph.properties.environment.src }}">
    </label>
    <label>
      <span>Preview contents</span>
      <textarea id="content" value="{{ graph.properties.environment.content }}"></textarea>
    </label>
    </template>
    <template if="{{ graph.properties.environment.runtime == 'websocket' }}">
    <label>
      <span>Runtime address</span>
      <input type="text" value="{{ graph.properties.environment.wsUrl }}">
    </label>
    </template>
    <div class="toolbar">
      <button on-click="{{ close }}">Done</button>
    </div>
  </template>
  <script>
    Polymer('noflo-graph-inspector', {
      updateName: function (event, detail, sender) {
        this.graph.properties.name = sender.textContent;
      },
      enteredView: function () {
        document.getElementById('container').classList.add('blur');
      },
      leftView: function () {
        document.getElementById('container').classList.remove('blur');
      },
      close: function () {
        if (!this.parentNode) {
          return;
        }
        this.parentNode.removeChild(this);
      }
    });
  </script>
</polymer-element>
